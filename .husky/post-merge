#!/bin/sh

# Husky v9 post-merge hook
# Runs after git merge

# Git LFS post-merge (if available)
if command -v git-lfs >/dev/null 2>&1; then
  git lfs post-merge "$@"
fi

# Remind to install dependencies if package files changed
if git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD | grep -q "package.json\|pnpm-lock.yaml"; then
  echo "ðŸ“¦ Package files changed. Consider running 'pnpm install'"
fi

if git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD | grep -q "Cargo.toml\|Cargo.lock"; then
  echo "ðŸ“¦ Cargo files changed. Consider running 'cargo build'"
fi

if git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD | grep -q "go.mod\|go.sum"; then
  echo "ðŸ“¦ Go module files changed. Consider running 'go mod download'"
fi

if git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD | grep -q "pyproject.toml\|requirements"; then
  echo "ðŸ“¦ Python package files changed. Consider running 'pip install -e .'"
fi
